(()=>{"use strict";var e={56(e,n,t){e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},72(e){var n=[];function t(e){for(var t=-1,r=0;r<n.length;r++)if(n[r].identifier===e){t=r;break}return t}function r(e,r){for(var o={},i=[],l=0;l<e.length;l++){var s=e[l],c=r.base?s[0]+r.base:s[0],d=o[c]||0,p="".concat(c," ").concat(d);o[c]=d+1;var h=t(p),u={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==h)n[h].references++,n[h].updater(u);else{var m=a(u,r);r.byIndex=l,n.splice(l,0,{identifier:p,updater:m,references:1})}i.push(p)}return i}function a(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,a){var o=r(e=e||[],a=a||{});return function(e){e=e||[];for(var i=0;i<o.length;i++){var l=t(o[i]);n[l].references--}for(var s=r(e,a),c=0;c<o.length;c++){var d=t(o[c]);0===n[d].references&&(n[d].updater(),n.splice(d,1))}o=s}}},113(e){e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},314(e){e.exports=function(e){var n=[];return n.toString=function(){return this.map(function(n){var t="",r=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),r&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),r&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t}).join("")},n.i=function(e,t,r,a,o){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var l=0;l<this.length;l++){var s=this[l][0];null!=s&&(i[s]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);r&&i[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),n.push(d))}},n}},365(e,n,t){t.d(n,{A:()=>l});var r=t(601),a=t.n(r),o=t(314),i=t.n(o)()(a());i.push([e.id,'*,\n*::before,\n*::after {\n  box-sizing: border-box;\n}\n\n*:not(dialog) {\n  margin: 0;\n}\n\nbody {\n  line-height: 1.5;\n  font-family:\n    system-ui,\n    -apple-system,\n    BlinkMacSystemFont,\n    "Segoe UI",\n    Roboto,\n    Oxygen,\n    Ubuntu,\n    Cantarell,\n    "Open Sans",\n    "Helvetica Neue",\n    sans-serif;\n  --webkit-font-smoothing: antialiased;\n}\n\nimg,\npicture,\nvideo,\ncanvas,\nsvg {\n  display: block;\n  max-width: 100%;\n}\n\ninput,\nbutton,\ntextarea,\nselect {\n  font: inherit;\n}\n\np,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  overflow-wrap: break-word;\n}\n\np {\n  text-wrap: pretty;\n}\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  text-wrap: balance;\n}\n\n#root,\n#__next {\n  isolation: isolate;\n}\n\nbody {\n  background-color: rgb(0, 87, 248);\n}\n\nh1 {\n  margin-top: 100px;\n}\n\nbutton {\n  margin-top: 40px;\n  cursor: pointer;\n  font-size: 24px;\n  background-color: yellow;\n  border: none;\n  border-radius: 15px;\n  padding: 5px 20px;\n  box-shadow: 4px 4px 10px;\n}\nbutton:hover {\n  background-color: rgb(153, 153, 0);\n}\n\n.title-screen {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.title {\n  margin-top: 300px;\n  font-size: 64px;\n  letter-spacing: 2px;\n  text-shadow: 4px 4px 10px rgba(18, 5, 5, 0.5);\n}\n\n.buttons-container {\n  margin-top: 10px;\n  display: flex;\n  gap: 60px;\n}\n\n.game-setup-view {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.game-setup-view > button:hover {\n  background-color: rgb(202, 202, 4);\n}\n\n.two-player-game {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.two-player-game > .gameboards-container {\n  display: flex;\n  gap: 80px;\n}\n\n.pass-screen {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.pass-screen > h1 {\n  margin-top: 300px;\n}\n\n.end-screen {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.end-screen > h1 {\n  margin-top: 300px;\n}\n\n.gameboard {\n  margin-top: 40px;\n  position: relative;\n  background-color: white;\n  width: fit-content;\n  box-shadow:\n    2px 2px 10px,\n    -2px -2px 10px;\n}\n\n.row {\n  display: flex;\n  flex-direction: row;\n}\n\n.cell {\n  height: var(--cell-size);\n  width: var(--cell-size);\n  border-right: 1px solid rgb(133, 133, 133);\n  border-bottom: 1px solid rgb(133, 133, 133);\n}\n\n.cell:nth-child(1) {\n  border-left: 1px solid rgb(133, 133, 133);\n}\n\n.row:first-child > .cell {\n  border-top: 1px solid rgb(133, 133, 133);\n}\n\n.ship {\n  position: absolute;\n}\n',""]);const l=i},540(e){e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},601(e){e.exports=function(e){return e[1]}},659(e){var n={};e.exports=function(e,t){var r=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},825(e){e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var a=void 0!==t.layer;a&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,a&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var o=t.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),n.styleTagTransform(r,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}}},n={};function t(r){var a=n[r];if(void 0!==a)return a.exports;var o=n[r]={id:r,exports:{}};return e[r](o,o.exports,t),o.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.nc=void 0;var r=t(72),a=t.n(r),o=t(825),i=t.n(o),l=t(659),s=t.n(l),c=t(56),d=t.n(c),p=t(540),h=t.n(p),u=t(113),m=t.n(u),f=t(365),g={};g.styleTagTransform=m(),g.setAttributes=d(),g.insert=s().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h(),a()(f.A,g),f.A&&f.A.locals&&f.A.locals;class b{gameboard=null;name="";constructor(e,n){this.gameboard=e,this.name=n}}class v extends b{shadowOpponentBoard=null;availableCells=null;constructor(e,n){super(e,n),this.shadowOpponentBoard=new Array(this.gameboard.board.length).fill(null).map(()=>new Array(this.gameboard.board[0].length).fill(null)),this.availableCells=this.shadowOpponentBoard.length*this.shadowOpponentBoard[0].length}searchForShip(){if(this.availableCells<=0)return!1;for(let e=0;e<this.shadowOpponentBoard.length;e++)for(let n=0;n<this.shadowOpponentBoard[e].length;n++)if("H"===this.shadowOpponentBoard[e][n]){const t=this.searchNearbyTarget([e,n]);if(t)return t}for(;;){const e=Math.floor(Math.random()*this.shadowOpponentBoard.length),n=Math.floor(Math.random()*this.shadowOpponentBoard.length);if(null===this.shadowOpponentBoard[e][n])return[e,n]}}searchNearbyTarget(e){const n=[[-1,0],[1,0],[0,-1],[0,1]];let[t,r]=e;for(let[e,a]of n){const n=-1*e,o=-1*a;if("H"===this.getCellValue(t+n,r+o)&&this.isValidAndNull(t+e,r+a))return[t+e,r+a]}for(let[e,a]of n)if(this.isValidAndNull(t+e,r+a))return[t+e,r+a];return!1}getCellValue(e,n){return e>=0&&e<this.shadowOpponentBoard.length&&n>=0&&n<this.shadowOpponentBoard.length&&this.shadowOpponentBoard[e][n]}isValidAndNull(e,n){return null===this.getCellValue(e,n)}markLocation(e,n){this.shadowOpponentBoard[e[0]][e[1]]=n,this.availableCells--}}const x=class{board=null;ships=[];saved=!1;constructor(e=10,n=10){this.board=new Array(e).fill().map(()=>Array(n).fill(null).map(()=>({shipIndex:null,cellStatus:"O",ship:null})))}receiveAttack(e,n){const t=this.board[e][n];return"H"!==t.cellStatus&&"M"!==t.cellStatus&&(t.ship?(t.cellStatus="H",t.ship.hit()):t.cellStatus="M",t.cellStatus)}placeShip(e,n){if(this.saved)return!1;if(e.length!==n.length)return!1;let t=this.#e(n);for(let t of e){if(t[0]<0||t[0]>=this.board.length)return!1;if(t[1]<0||t[1]>=this.board.length)return!1;if("O"!==this.board[t[0]][t[1]].cellStatus&&this.board[t[0]][t[1]].ship!==n)return!1}e.sort((e,n)=>e[0]-n[0]!==0?e[0]-n[0]:e[1]-n[1]),"number"==typeof t?(this.ships[t].coordArr=e,this.ships[t].onBoard=!0):t=this.ships.push({ship:n,coordArr:e,onBoard:!0})-1;for(let r of e)this.board[r[0]][r[1]]={shipIndex:t,cellStatus:"S",ship:n};return!0}placeShipRandom(e){let n=!1;for(;!n;){const t=Math.floor(Math.random()*this.board.length),r=Math.floor(Math.random()*this.board[0].length),a=Math.random()>.5?1:-1,o=Math.random()>.5;let i=[];if(i.push([t,r]),o)for(let n=1;n<e.length;n++)i.push([t+n*a,r]);else for(let n=1;n<e.length;n++)i.push([t,r+n*a]);n=this.placeShip(i,e)}}rotateShip(e){const n=this.ships.find(n=>n.ship===e);if(!n)return!1;const t=n.coordArr,r=[];r.push(t[0]);const a=t[0][0]===t[t.length-1][0];for(let n=1;n<e.length;n++)r.push(a?[r[0][0]+n,r[0][1]]:[r[0][0],r[0][1]+n]);return this.placeShip(r,e)}isAllShipsSunk(){return 0===this.ships.filter(e=>!e.ship.isSunk()).length}printBoard(){this.board.forEach(e=>{const n=e.map(e=>e.cellStatus).join(" ");console.log(n)})}#e(e){let n=this.ships.findIndex(n=>n.ship===e);if(n>-1){for(let e of this.ships[n].coordArr)this.board[e[0]][e[1]]={shipIndex:null,cellStatus:"O",ship:null};return this.ships[n].onBoard=!1,n}return!1}},y=class{length=1;id=null;color=null;#n=0;constructor(e,n=""){if("number"!=typeof e)throw Error("Ship length must be a number");this.length=e,this.color=n}hit(){this.#n++,this.isSunk()&&(this.color="rgb(76, 76, 76)")}isSunk(){return this.length===this.#n}},w=50;document.documentElement.style.setProperty("--cell-size","50px");let S,C,E,A=!1,k=null;function B(e){E=e}function M(e,n,t,r){const a=document.createElement("div");a.className="gameboard";for(let n=0;n<e.board.length;n++){const r=document.createElement("div");r.className="row";for(let a=0;a<e.board[n].length;a++){const o=document.createElement("div");switch(o.id=`${n},${a}`,o.className="cell",o.style.cursor=t?"pointer":"default",e.board[n][a].cellStatus){case"M":o.style.backgroundColor="rgba(255, 233, 122, 0.75)";break;case"H":o.style.backgroundColor="rgba(240, 10, 10, 0.63)"}r.appendChild(o)}a.appendChild(r)}if(t&&a.addEventListener("click",n=>{const r=n.target.closest(".cell");if(!r)return;let[a,o]=r.id.split(",");e.receiveAttack(a,o)&&t()}),!n)for(let n=0;n<e.ships.length;n++){const t=T(e,n,e.ships[n].ship.color);r||(t.style.cursor="grab"),a.appendChild(t)}return a}function T(e,n,t){const r=e.ships[n].coordArr,a=document.createElement("div");return a.className="ship",a.dataset.shipIndex=n,N(a,r),a.style.backgroundColor=t,a.addEventListener("mousedown",n=>{if(e.saved)return;if(0!==n.button)return;A=!0,k=n.target,a.style.cursor="grabbing";const t=a.getBoundingClientRect();S=n.clientX-t.left,C=n.clientY-t.top}),a.addEventListener("contextmenu",t=>{t.preventDefault();const r=e.ships[n].ship;e.rotateShip(r)&&N(t.target,e.ships[n].coordArr,r.onBoard)}),a}function N(e,n,t=!0){if(t){let t=null,r=null;n[0][0]===n[n.length-1][0]?(t=n.length*w,r=w):(t=w,r=n.length*w),e.style.top=n[0][0]*w+"px",e.style.left=n[0][1]*w+"px",e.style.width=`${t}px`,e.style.height=`${r}px`}}document.addEventListener("mousemove",e=>{if(!A)return;const n=k.closest(".gameboard").getBoundingClientRect();k.style.left=e.clientX-n.left-S+"px",k.style.top=e.clientY-n.top-C+"px"}),document.addEventListener("mouseup",e=>{if(0!==e.button||!A)return;A=!1;const n=k.closest(".gameboard").getBoundingClientRect(),t=k.getBoundingClientRect(),r=Math.floor((t.top+25-n.top)/w),a=Math.floor((t.left+25-n.left)/w),o=E.ships[k.dataset.shipIndex];if(r<0||r>=E.board.length||a<0||a>=E.board[0].length)return N(k,o.coordArr),k.style.cursor="grab",void(k=null);const i=o.coordArr[0],l=i[0]-r,s=i[1]-a,c=[];for(let e of o.coordArr)c.push([e[0]-l,e[1]-s]);E.placeShip(c,o.ship)&&N(k,c),k.style.cursor="grab",k=null});const P=document.getElementById("game-container");async function O(){return new Promise(e=>{P.replaceChildren();const n=document.createElement("div"),t=document.createElement("h1"),r=document.createElement("div"),a=document.createElement("button"),o=document.createElement("button");n.className="title-screen",t.className="title",r.className="buttons-container",a.innerText="1-Player",o.innerText="2-Players",t.textContent="BATTLESHIP",a.addEventListener("click",n=>{n.preventDefault(),e("singlePlayer")}),o.addEventListener("click",n=>{n.preventDefault(),e("twoPlayer")}),r.appendChild(a),r.appendChild(o),n.appendChild(t),n.appendChild(r),P.appendChild(n)})}async function L(e){return new Promise(n=>{P.replaceChildren();const t=document.createElement("div");t.className="game-setup-view",B(e.gameboard);const r=M(e.gameboard,!1),a=document.createElement("h1"),o=document.createElement("button");a.innerText=`Move your pieces ${e.name}!`,o.innerText="Set",o.ariaLabel="Set Board",o.className="set",o.addEventListener("click",()=>{e.gameboard.saved=!0,n()}),t.appendChild(a),t.appendChild(r),t.appendChild(o),P.appendChild(t)})}async function I(e,n){return new Promise(t=>{P.replaceChildren(),B(e.gameboard);const r=document.createElement("div"),a=document.createElement("div"),o=document.createElement("h1"),i=M(e.gameboard,!1,null,!0),l=M(n.gameboard,!0,t);o.innerText=`${e.name}'s Turn`,r.className="two-player-game",a.className="gameboards-container",r.appendChild(o),a.appendChild(i),a.appendChild(l),r.appendChild(a),P.appendChild(r)})}async function R(e){return new Promise(n=>{P.replaceChildren();const t=document.createElement("div"),r=document.createElement("h1"),a=document.createElement("button");t.className="pass-screen",r.innerText=`It's ${e.name}'s Turn`,a.innerText="Start Turn",a.addEventListener("click",e=>{e.preventDefault(),n()}),t.appendChild(r),t.appendChild(a),P.appendChild(t)})}async function H(e,n){return new Promise(t=>{P.replaceChildren();const r=document.createElement("div"),a=document.createElement("h1"),o=document.createElement("div"),i=document.createElement("button"),l=document.createElement("button");r.className="end-screen",o.className="buttons-container",a.innerText=`${e.name} Wins!`,l.innerText="Title Screen",i.innerText="New Game",i.addEventListener("click",e=>{e.preventDefault(),t(n)}),l.addEventListener("click",e=>{e.preventDefault(),t("titleScreen")}),o.appendChild(i),o.appendChild(l),r.appendChild(a),r.appendChild(o),P.appendChild(r)})}async function $(){const e=new b(new x,"Player 1");z().forEach(n=>{e.gameboard.placeShipRandom(n)});const n=new v(new x,"Computer");for(z().forEach(e=>{n.gameboard.placeShipRandom(e)}),await L(e);!e.gameboard.isAllShipsSunk()&&!n.gameboard.isAllShipsSunk();){await I(e,n);const t=n.searchForShip(),r=e.gameboard.receiveAttack(t[0],t[1]);n.markLocation(t,r)}return await H(e.gameboard.isAllShipsSunk()?n:e,"singlePlayer")}async function D(){const e=new b(new x,"Player 1");z().forEach(n=>{e.gameboard.placeShipRandom(n)});const n=new b(new x,"Player 2");z().forEach(e=>{n.gameboard.placeShipRandom(e)});const t=[];t.push(e),t.push(n);for(let e of t)await R(e),await L(e);let r=Math.floor(2*Math.random());for(;!e.gameboard.isAllShipsSunk()&&!n.gameboard.isAllShipsSunk();)await R(t[r%t.length]),await I(t[r%t.length],t[(r+1)%t.length]),r++;return await H(t[0].gameboard.isAllShipsSunk()?t[1]:t[0],"twoPlayer")}function z(){const e=[];return e.push(new y(4,"rgba(9, 129, 249, 0.63)")),e.push(new y(3,"rgba(255, 176, 92, 0.63)")),e.push(new y(3,"rgba(255, 245, 59, 0.63)")),e.push(new y(2,"rgba(133, 238, 63, 0.63)")),e.push(new y(2,"rgba(16, 241, 215, 0.63)")),e.push(new y(1,"rgba(251, 61, 182, 0.63)")),e}!async function(){let e=await O();for(;;)e="twoPlayer"===e?await D():"singlePlayer"===e?await $():await O()}()})();